{
    "input_path": "/home/bocchi/Downloads/nougat.pdf",
    "page_index": 8,
    "page_count": 17,
    "width": 1191,
    "height": 1684,
    "model_settings": {
        "use_doc_preprocessor": false,
        "use_layout_detection": true,
        "use_chart_recognition": false,
        "use_seal_recognition": false,
        "use_ocr_for_image_block": false,
        "format_block_content": false,
        "merge_layout_blocks": true,
        "markdown_ignore_labels": [
            "number",
            "footnote",
            "header",
            "header_image",
            "footer",
            "footer_image",
            "aside_text"
        ],
        "return_layout_polygon_points": true
    },
    "parsing_res_list": [
        {
            "block_label": "header",
            "block_content": "Nougat",
            "block_bbox": [
                123,
                70,
                189,
                92
            ],
            "block_id": 0,
            "block_order": null,
            "group_id": 0,
            "block_polygon_points": [
                [
                    123.0,
                    70.0
                ],
                [
                    188.0,
                    70.0
                ],
                [
                    188.0,
                    91.0
                ],
                [
                    123.0,
                    91.0
                ]
            ]
        },
        {
            "block_label": "header",
            "block_content": "Blecher et al.",
            "block_bbox": [
                955,
                70,
                1065,
                92
            ],
            "block_id": 1,
            "block_order": null,
            "group_id": 1,
            "block_polygon_points": [
                [
                    955.0,
                    69.99999237060547
                ],
                [
                    1064.0,
                    69.99999237060547
                ],
                [
                    1064.0,
                    90.99999237060547
                ],
                [
                    955.0,
                    90.99999237060547
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "Here  $ \\ell $ is the signal of logits and x the index. Using this new signal we compute variances again but this time from the point x to the end of the sequence",
            "block_bbox": [
                120,
                147,
                1067,
                194
            ],
            "block_id": 2,
            "block_order": 1,
            "group_id": 2,
            "block_polygon_points": [
                [
                    120.0,
                    147.0
                ],
                [
                    1067.0,
                    147.0
                ],
                [
                    1067.0,
                    194.0
                ],
                [
                    120.0,
                    194.0
                ]
            ]
        },
        {
            "block_label": "display_formula",
            "block_content": " $$ \\mathrm{Var}\\mathrm{End}_{B}[\\ell](x)=\\frac{1}{S-x}\\sum_{i=x}^{S}\\left(\\mathrm{Var}\\mathrm{Win}_{B}[\\ell](i)-\\frac{1}{S-x}\\sum_{j=x}^{S}\\mathrm{Var}\\mathrm{Win}_{B}[\\ell](i)\\right)^{2}. $$ ",
            "block_bbox": [
                260,
                208,
                928,
                285
            ],
            "block_id": 3,
            "block_order": 2,
            "group_id": 3,
            "block_polygon_points": [
                [
                    260.0,
                    208.0
                ],
                [
                    928.0,
                    208.0
                ],
                [
                    928.0,
                    285.0
                ],
                [
                    260.0,
                    285.0
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "If this signal drops below a certain threshold (we choose 6.75) and stays below for the remainder of the sequence, we classify the sequence to have repetitions.",
            "block_bbox": [
                121,
                300,
                1066,
                345
            ],
            "block_id": 4,
            "block_order": 3,
            "group_id": 4,
            "block_polygon_points": [
                [
                    121.0,
                    300.0
                ],
                [
                    1066.0,
                    300.0
                ],
                [
                    1066.0,
                    345.0
                ],
                [
                    121.0,
                    345.0
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "During inference time, it is obviously not possible to compute the to the end of the sequence if our goal is to stop generation at an earlier point in time. So here we work with a subset of the last 200 tokens and a half the threshold. After the generation is finished, the procedure as described above is repeated for the full sequence.",
            "block_bbox": [
                121,
                355,
                1069,
                421
            ],
            "block_id": 5,
            "block_order": 4,
            "group_id": 5,
            "block_polygon_points": [
                [
                    121.0,
                    355.0
                ],
                [
                    1069.0,
                    355.0
                ],
                [
                    1069.0,
                    421.0
                ],
                [
                    121.0,
                    421.0
                ]
            ]
        },
        {
            "block_label": "paragraph_title",
            "block_content": "5.5 Limitations & Future work",
            "block_bbox": [
                122,
                448,
                408,
                471
            ],
            "block_id": 6,
            "block_order": 5,
            "group_id": 6,
            "block_polygon_points": [
                [
                    122.0,
                    448.0
                ],
                [
                    408.0,
                    448.0
                ],
                [
                    408.0,
                    471.0
                ],
                [
                    122.0,
                    471.0
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "Utility The utility of the model is limited by a number of factors. First, the problem with repetitions outlined in section 5.4. The model is trained on research papers, which means it works particularly well on documents with a similar structure. However, it can still accurately convert other types of documents.",
            "block_bbox": [
                122,
                490,
                1067,
                554
            ],
            "block_id": 7,
            "block_order": 6,
            "group_id": 7,
            "block_polygon_points": [
                [
                    122.0,
                    490.0
                ],
                [
                    1067.0,
                    490.0
                ],
                [
                    1067.0,
                    554.0
                ],
                [
                    122.0,
                    554.0
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "Nearly every dataset sample is in English. Initial tests on a small sample suggest that the modelâ€™s performance with other Latin-based languages is satisfactory, although any special characters from these languages will be replaced with the closest equivalent from the Latin alphabet. Non-Latin script languages result in instant repetitions.",
            "block_bbox": [
                121,
                555,
                1067,
                621
            ],
            "block_id": 8,
            "block_order": 7,
            "group_id": 8,
            "block_polygon_points": [
                [
                    121.0,
                    555.0
                ],
                [
                    1067.0,
                    555.0
                ],
                [
                    1067.0,
                    621.0
                ],
                [
                    121.0,
                    621.0
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "Generation Speed On a machine with a NVIDIA A10G graphics card with 24GB VRAM we can process 6 pages in parallel. The generation speed depends heavily on the amount of text on any given page. With an average number of tokens of  $ \\approx $ 1400 we get an mean generation time of 19.5s per batch for the base model without any inference optimization. Compared to classical approaches (GROBID 10.6 PDF/s [4]) this is very slow, but it is not limited to digital-born PDFs and can correctly parse mathematical expressions.",
            "block_bbox": [
                121,
                621,
                1069,
                730
            ],
            "block_id": 9,
            "block_order": 8,
            "group_id": 9,
            "block_polygon_points": [
                [
                    121.0,
                    621.0
                ],
                [
                    1069.0,
                    621.0
                ],
                [
                    1069.0,
                    730.0
                ],
                [
                    121.0,
                    730.0
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "Future work The model is trained on one page at a time without knowledge about other pages in the document. This results in inconsistencies across the document. Most notably in the bibliography where the model was trained on different styles or section titles where sometimes numbers are skipped or hallucinated. Though handling each page separately significantly improves parallelization and scalability, it may diminish the quality of the merged document.",
            "block_bbox": [
                121,
                731,
                1070,
                838
            ],
            "block_id": 10,
            "block_order": 9,
            "group_id": 10,
            "block_polygon_points": [
                [
                    121.0,
                    730.9999389648438
                ],
                [
                    1068.9998779296875,
                    730.9999389648438
                ],
                [
                    1068.9998779296875,
                    828.9999389648438
                ],
                [
                    121.0,
                    828.9999389648438
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "The primary challenge to solve is the tendency for the model to collapse into a repeating loop, which is left for future work.",
            "block_bbox": [
                121,
                840,
                1067,
                883
            ],
            "block_id": 11,
            "block_order": 10,
            "group_id": 11,
            "block_polygon_points": [
                [
                    121.0,
                    840.0
                ],
                [
                    1067.0,
                    840.0
                ],
                [
                    1067.0,
                    883.0
                ],
                [
                    121.0,
                    883.0
                ]
            ]
        },
        {
            "block_label": "paragraph_title",
            "block_content": "6 Conclusion",
            "block_bbox": [
                123,
                918,
                310,
                947
            ],
            "block_id": 12,
            "block_order": 11,
            "group_id": 12,
            "block_polygon_points": [
                [
                    123.0,
                    918.0
                ],
                [
                    310.0,
                    918.0
                ],
                [
                    310.0,
                    947.0
                ],
                [
                    123.0,
                    947.0
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "In this work, we present Nougat, an end-to-end trainable encoder-decoder transformer based model for converting document pages to markup. We apply recent advances in visual document understanding to a novel OCR task. Distinct from related approaches, our method does not rely on OCR or embedded text representations, instead relying solely on the rasterized document page. Moreover, we have illustrated an automatic and unsupervised dataset generation process that we used to successfully train the model for scientific document to markup conversion. Overall, our approach has shown great potential for not only extracting text from digital-born PDFs but also for converting scanned papers and textbooks. We hope this work can be a starting point for future research in related domains.",
            "block_bbox": [
                121,
                972,
                1068,
                1127
            ],
            "block_id": 13,
            "block_order": 12,
            "group_id": 13,
            "block_polygon_points": [
                [
                    121.0,
                    972.0
                ],
                [
                    1068.0,
                    972.0
                ],
                [
                    1068.0,
                    1127.0
                ],
                [
                    121.0,
                    1127.0
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "All the code for model evaluation, training and dataset generation can be accessed at https://github.com/facebookresearch/nougat.",
            "block_bbox": [
                121,
                1125,
                1067,
                1170
            ],
            "block_id": 14,
            "block_order": 13,
            "group_id": 14,
            "block_polygon_points": [
                [
                    121,
                    1125
                ],
                [
                    121,
                    1169
                ],
                [
                    1066,
                    1169
                ],
                [
                    1066,
                    1125
                ]
            ]
        },
        {
            "block_label": "paragraph_title",
            "block_content": "7 Acknowledgments",
            "block_bbox": [
                122,
                1204,
                398,
                1234
            ],
            "block_id": 15,
            "block_order": 14,
            "group_id": 15,
            "block_polygon_points": [
                [
                    122.0,
                    1204.0
                ],
                [
                    398.0,
                    1204.0
                ],
                [
                    398.0,
                    1234.0
                ],
                [
                    122.0,
                    1234.0
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "Thanks to Ross Taylor, Marcin Kardas, Iliyan Zarov, Kevin Stone, Jian Xiang Kuan, Andrew Poulton and Hugo Touvron for their valuable discussions and feedback.",
            "block_bbox": [
                122,
                1258,
                1066,
                1303
            ],
            "block_id": 16,
            "block_order": 15,
            "group_id": 16,
            "block_polygon_points": [
                [
                    122.0,
                    1258.0
                ],
                [
                    1066.0,
                    1258.0
                ],
                [
                    1066.0,
                    1303.0
                ],
                [
                    122.0,
                    1303.0
                ]
            ]
        },
        {
            "block_label": "text",
            "block_content": "Thanks to Faisal Azhar for the support throughout the project.",
            "block_bbox": [
                123,
                1302,
                624,
                1325
            ],
            "block_id": 17,
            "block_order": 16,
            "group_id": 17,
            "block_polygon_points": [
                [
                    123,
                    1302
                ],
                [
                    123,
                    1324
                ],
                [
                    623,
                    1324
                ],
                [
                    623,
                    1302
                ]
            ]
        },
        {
            "block_label": "paragraph_title",
            "block_content": "References",
            "block_bbox": [
                123,
                1359,
                264,
                1387
            ],
            "block_id": 18,
            "block_order": 17,
            "group_id": 18,
            "block_polygon_points": [
                [
                    123.0,
                    1359.0
                ],
                [
                    264.0,
                    1359.0
                ],
                [
                    264.0,
                    1387.0
                ],
                [
                    123.0,
                    1387.0
                ]
            ]
        },
        {
            "block_label": "reference_content",
            "block_content": "[1] Sebastian Spiegler. Statistics of the Common Crawl Corpus 2012, June 2013. URL https://docs.google.com/file/d/1_9698uglerxB9nAglvaHkEgU-iZNm1TvVGucW7245-WGvZq47teNpb_uL5N9.",
            "block_bbox": [
                134,
                1400,
                1066,
                1444
            ],
            "block_id": 19,
            "block_order": 18,
            "group_id": 19,
            "block_polygon_points": [
                [
                    134,
                    1400
                ],
                [
                    134,
                    1443
                ],
                [
                    1065,
                    1443
                ],
                [
                    1065,
                    1400
                ]
            ]
        },
        {
            "block_label": "number",
            "block_content": "9",
            "block_bbox": [
                588,
                1485,
                603,
                1502
            ],
            "block_id": 20,
            "block_order": null,
            "group_id": 20,
            "block_polygon_points": [
                [
                    588.0,
                    1485.0
                ],
                [
                    602.0,
                    1485.0
                ],
                [
                    602.0,
                    1501.0
                ],
                [
                    588.0,
                    1501.0
                ]
            ]
        }
    ],
    "layout_det_res": {
        "input_path": null,
        "page_index": null,
        "boxes": [
            {
                "cls_id": 12,
                "label": "header",
                "score": 0.8017563223838806,
                "coordinate": [
                    123,
                    70,
                    189,
                    92
                ],
                "order": null,
                "polygon_points": [
                    [
                        123.0,
                        70.0
                    ],
                    [
                        188.0,
                        70.0
                    ],
                    [
                        188.0,
                        91.0
                    ],
                    [
                        123.0,
                        91.0
                    ]
                ]
            },
            {
                "cls_id": 12,
                "label": "header",
                "score": 0.8463515043258667,
                "coordinate": [
                    955,
                    70,
                    1065,
                    92
                ],
                "order": null,
                "polygon_points": [
                    [
                        955.0,
                        69.99999237060547
                    ],
                    [
                        1064.0,
                        69.99999237060547
                    ],
                    [
                        1064.0,
                        90.99999237060547
                    ],
                    [
                        955.0,
                        90.99999237060547
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.9062952399253845,
                "coordinate": [
                    120,
                    147,
                    1067,
                    194
                ],
                "order": 1,
                "polygon_points": [
                    [
                        120.0,
                        147.0
                    ],
                    [
                        1067.0,
                        147.0
                    ],
                    [
                        1067.0,
                        194.0
                    ],
                    [
                        120.0,
                        194.0
                    ]
                ]
            },
            {
                "cls_id": 5,
                "label": "display_formula",
                "score": 0.9294323325157166,
                "coordinate": [
                    260,
                    208,
                    928,
                    285
                ],
                "order": 2,
                "polygon_points": [
                    [
                        260.0,
                        208.0
                    ],
                    [
                        928.0,
                        208.0
                    ],
                    [
                        928.0,
                        285.0
                    ],
                    [
                        260.0,
                        285.0
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.8944589495658875,
                "coordinate": [
                    121,
                    300,
                    1066,
                    345
                ],
                "order": 3,
                "polygon_points": [
                    [
                        121.0,
                        300.0
                    ],
                    [
                        1066.0,
                        300.0
                    ],
                    [
                        1066.0,
                        345.0
                    ],
                    [
                        121.0,
                        345.0
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.9223076105117798,
                "coordinate": [
                    121,
                    355,
                    1069,
                    421
                ],
                "order": 4,
                "polygon_points": [
                    [
                        121.0,
                        355.0
                    ],
                    [
                        1069.0,
                        355.0
                    ],
                    [
                        1069.0,
                        421.0
                    ],
                    [
                        121.0,
                        421.0
                    ]
                ]
            },
            {
                "cls_id": 17,
                "label": "paragraph_title",
                "score": 0.8666152954101562,
                "coordinate": [
                    122,
                    448,
                    408,
                    471
                ],
                "order": 5,
                "polygon_points": [
                    [
                        122.0,
                        448.0
                    ],
                    [
                        408.0,
                        448.0
                    ],
                    [
                        408.0,
                        471.0
                    ],
                    [
                        122.0,
                        471.0
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.8999372720718384,
                "coordinate": [
                    122,
                    490,
                    1067,
                    554
                ],
                "order": 6,
                "polygon_points": [
                    [
                        122.0,
                        490.0
                    ],
                    [
                        1067.0,
                        490.0
                    ],
                    [
                        1067.0,
                        554.0
                    ],
                    [
                        122.0,
                        554.0
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.8923647403717041,
                "coordinate": [
                    121,
                    555,
                    1067,
                    621
                ],
                "order": 7,
                "polygon_points": [
                    [
                        121.0,
                        555.0
                    ],
                    [
                        1067.0,
                        555.0
                    ],
                    [
                        1067.0,
                        621.0
                    ],
                    [
                        121.0,
                        621.0
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.9232233762741089,
                "coordinate": [
                    121,
                    621,
                    1069,
                    730
                ],
                "order": 8,
                "polygon_points": [
                    [
                        121.0,
                        621.0
                    ],
                    [
                        1069.0,
                        621.0
                    ],
                    [
                        1069.0,
                        730.0
                    ],
                    [
                        121.0,
                        730.0
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.9469128251075745,
                "coordinate": [
                    121,
                    731,
                    1070,
                    838
                ],
                "order": 9,
                "polygon_points": [
                    [
                        121.0,
                        730.9999389648438
                    ],
                    [
                        1068.9998779296875,
                        730.9999389648438
                    ],
                    [
                        1068.9998779296875,
                        828.9999389648438
                    ],
                    [
                        121.0,
                        828.9999389648438
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.896176278591156,
                "coordinate": [
                    121,
                    840,
                    1067,
                    883
                ],
                "order": 10,
                "polygon_points": [
                    [
                        121.0,
                        840.0
                    ],
                    [
                        1067.0,
                        840.0
                    ],
                    [
                        1067.0,
                        883.0
                    ],
                    [
                        121.0,
                        883.0
                    ]
                ]
            },
            {
                "cls_id": 17,
                "label": "paragraph_title",
                "score": 0.8590249419212341,
                "coordinate": [
                    123,
                    918,
                    310,
                    947
                ],
                "order": 11,
                "polygon_points": [
                    [
                        123.0,
                        918.0
                    ],
                    [
                        310.0,
                        918.0
                    ],
                    [
                        310.0,
                        947.0
                    ],
                    [
                        123.0,
                        947.0
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.9353075623512268,
                "coordinate": [
                    121,
                    972,
                    1068,
                    1127
                ],
                "order": 12,
                "polygon_points": [
                    [
                        121.0,
                        972.0
                    ],
                    [
                        1068.0,
                        972.0
                    ],
                    [
                        1068.0,
                        1127.0
                    ],
                    [
                        121.0,
                        1127.0
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.8781629204750061,
                "coordinate": [
                    121,
                    1125,
                    1067,
                    1170
                ],
                "order": 13,
                "polygon_points": [
                    [
                        121,
                        1125
                    ],
                    [
                        121,
                        1169
                    ],
                    [
                        1066,
                        1169
                    ],
                    [
                        1066,
                        1125
                    ]
                ]
            },
            {
                "cls_id": 17,
                "label": "paragraph_title",
                "score": 0.8756991624832153,
                "coordinate": [
                    122,
                    1204,
                    398,
                    1234
                ],
                "order": 14,
                "polygon_points": [
                    [
                        122.0,
                        1204.0
                    ],
                    [
                        398.0,
                        1204.0
                    ],
                    [
                        398.0,
                        1234.0
                    ],
                    [
                        122.0,
                        1234.0
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.8530175685882568,
                "coordinate": [
                    122,
                    1258,
                    1066,
                    1303
                ],
                "order": 15,
                "polygon_points": [
                    [
                        122.0,
                        1258.0
                    ],
                    [
                        1066.0,
                        1258.0
                    ],
                    [
                        1066.0,
                        1303.0
                    ],
                    [
                        122.0,
                        1303.0
                    ]
                ]
            },
            {
                "cls_id": 22,
                "label": "text",
                "score": 0.8323004245758057,
                "coordinate": [
                    123,
                    1302,
                    624,
                    1325
                ],
                "order": 16,
                "polygon_points": [
                    [
                        123,
                        1302
                    ],
                    [
                        123,
                        1324
                    ],
                    [
                        623,
                        1324
                    ],
                    [
                        623,
                        1302
                    ]
                ]
            },
            {
                "cls_id": 17,
                "label": "paragraph_title",
                "score": 0.857534646987915,
                "coordinate": [
                    123,
                    1359,
                    264,
                    1387
                ],
                "order": 17,
                "polygon_points": [
                    [
                        123.0,
                        1359.0
                    ],
                    [
                        264.0,
                        1359.0
                    ],
                    [
                        264.0,
                        1387.0
                    ],
                    [
                        123.0,
                        1387.0
                    ]
                ]
            },
            {
                "cls_id": 18,
                "label": "reference",
                "score": 0.7542527318000793,
                "coordinate": [
                    131,
                    1400,
                    1066,
                    1445
                ],
                "order": 18,
                "polygon_points": [
                    [
                        131.0,
                        1400.0
                    ],
                    [
                        1066.0,
                        1400.0
                    ],
                    [
                        1066.0,
                        1445.0
                    ],
                    [
                        131.0,
                        1445.0
                    ]
                ]
            },
            {
                "cls_id": 19,
                "label": "reference_content",
                "score": 0.8660570979118347,
                "coordinate": [
                    134,
                    1400,
                    1066,
                    1444
                ],
                "order": 19,
                "polygon_points": [
                    [
                        134,
                        1400
                    ],
                    [
                        134,
                        1443
                    ],
                    [
                        1065,
                        1443
                    ],
                    [
                        1065,
                        1400
                    ]
                ]
            },
            {
                "cls_id": 16,
                "label": "number",
                "score": 0.7226668000221252,
                "coordinate": [
                    588,
                    1485,
                    603,
                    1502
                ],
                "order": 20,
                "polygon_points": [
                    [
                        588.0,
                        1485.0
                    ],
                    [
                        602.0,
                        1485.0
                    ],
                    [
                        602.0,
                        1501.0
                    ],
                    [
                        588.0,
                        1501.0
                    ]
                ]
            }
        ]
    }
}